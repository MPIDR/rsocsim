<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SOCSIM Simplified for LLMs • rsocsim</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="SOCSIM Simplified for LLMs"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rsocsim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MPIDR/rsocsim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>SOCSIM Simplified for LLMs</h1>
      <small class="dont-index">Source: <a href="https://github.com/MPIDR/rsocsim/blob/main/socsim_simplified2.md" class="external-link"><code>socsim_simplified2.md</code></a></small>
    </div>

<div id="socsim-simplified-for-llms" class="section level1">

<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a></h2>
<p>SOCSIM is an open-source demographic microsimulation program. It simulates core demographic events (birth, death, marriage, divorce) and social group transitions for individuals within a population. It uses a competing risk model where each individual has a scheduled “next event”.</p>
</div>
<div class="section level2">
<h2 id="id_1-running-socsim-via-r-rsocsim">1. Running SOCSIM via R (<code>rsocsim</code>)<a class="anchor" aria-label="anchor" href="#id_1-running-socsim-via-r-rsocsim"></a></h2>
<p>The <code>rsocsim</code> package provides a wrapper to run simulations and analyze results.</p>
<div class="section level3">
<h3 id="key-functions">Key Functions<a class="anchor" aria-label="anchor" href="#key-functions"></a></h3>
<ul><li>
<strong><code>socsim(folder, supfile, seed, process_method, ...)</code></strong>: The main entry point.
<ul><li>
<code>folder</code>: Base directory for simulation files.</li>
<li>
<code>supfile</code>: The supervisory configuration file (e.g., <code>sim.sup</code>).</li>
<li>
<code>seed</code>: Random number seed (integer).</li>
<li>
<code>process_method</code>: <code>"inprocess"</code> (runs in R) or <code>"future"</code> (runs in separate process).</li>
</ul></li>
<li>
<strong><code>create_initial_population(folder, size_opop, ...)</code></strong>: Generates a basic initial population (<code>.opop</code>) and empty marriage file (<code>.omar</code>) to bootstrap a simulation.</li>
<li>
<strong><code>download_rates(folder, countrycode, ...)</code></strong>: Downloads standardized fertility and mortality rate files (e.g., from UN WPP) for a given country and period.</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="id_2-input-files">2. Input Files<a class="anchor" aria-label="anchor" href="#id_2-input-files"></a></h2>
<p>SOCSIM requires three main types of input:</p>
<div class="section level3">
<h3 id="a-supervisory-file-sup">A. Supervisory File (<code>.sup</code>)<a class="anchor" aria-label="anchor" href="#a-supervisory-file-sup"></a></h3>
<p>The configuration file controlling the simulation. It defines global parameters and simulation “segments” (periods with specific rates).</p>
<p><strong>Global Directives:</strong> * <code>segments &lt;int&gt;</code>: Number of simulation segments. * <code>input_file &lt;stem&gt;</code>: Base name for initial <code>.opop</code> and <code>.omar</code> files. * <code>output_file &lt;stem&gt;</code>: Base name for output files. * <code>hetfert &lt;0/1&gt;</code>: Enable heterogeneous fertility (fertility multipliers). * <code>bint &lt;int&gt;</code>: Minimum birth interval in months (default 9). * <code>marriage_queues &lt;1/2&gt;</code>: Marriage market system (1 = one-queue, 2 = two-queue). * <code>marriage_eval &lt;preference/distribution&gt;</code>: Method for evaluating potential spouses. * <code>child_inherits_group &lt;rule&gt;</code>: How newborns are assigned groups (e.g., <code>from_mother</code>).</p>
<p><strong>Segment Directives:</strong> * <code>duration &lt;months&gt;</code>: Length of the segment. * <code>include &lt;filename&gt;</code>: Load rate files. * <code>run</code>: Execute the current segment.</p>
</div>
<div class="section level3">
<h3 id="b-rate-files">B. Rate Files<a class="anchor" aria-label="anchor" href="#b-rate-files"></a></h3>
<p>Define probabilities for demographic events. Rates are specified in blocks identified by keywords: <code>event group sex marital_status [parity] [dest_group]</code></p>
<p><strong>Format:</strong></p>
<pre><code>death 1 M single
0   1   0.046  # Age 0-1 month: prob 0.046
0   12  0.005  # Age 1-12 months: prob 0.005
...</code></pre>
<ul><li>
<strong>Events</strong>: <code>birth</code>, <code>death</code>, <code>marriage</code>, <code>divorce</code>, <code>transit</code>.</li>
<li>
<strong>Defaults</strong>: Missing rates often default to simpler categories (e.g., widowed defaults to divorced, parity N defaults to parity N-1).</li>
</ul></div>
<div class="section level3">
<h3 id="c-initial-population-opop--marriage-omar">C. Initial Population (<code>.opop</code>) &amp; Marriage (<code>.omar</code>)<a class="anchor" aria-label="anchor" href="#c-initial-population-opop--marriage-omar"></a></h3>
<ul><li>
<strong>.opop</strong>: A space-delimited file with 14 columns describing each individual.</li>
<li>
<strong>.omar</strong>: A space-delimited file with 8 columns describing marriages.</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="id_3-simulation-mechanics-c-core">3. Simulation Mechanics (C++ Core)<a class="anchor" aria-label="anchor" href="#id_3-simulation-mechanics-c-core"></a></h2>
<div class="section level3">
<h3 id="event-scheduling">Event Scheduling<a class="anchor" aria-label="anchor" href="#event-scheduling"></a></h3>
<ul><li>
<strong>Competing Risks</strong>: Every living person has exactly <em>one</em> next scheduled event.</li>
<li>
<strong>Waiting Times</strong>: Generated using piecewise exponential distributions based on current rates.</li>
<li>
<strong>Execution</strong>: Events are executed month-by-month. Executing an event (or changing status) triggers rescheduling of the next event.</li>
</ul></div>
<div class="section level3">
<h3 id="marriage-market">Marriage Market<a class="anchor" aria-label="anchor" href="#marriage-market"></a></h3>
<ul><li>
<strong>Two-Queue System</strong> (<code>marriage_queues 2</code>): Both males and females initiate marriage searches. If no match is found immediately, they enter a queue.</li>
<li>
<strong>One-Queue System</strong> (<code>marriage_queues 1</code>): Only females initiate searches. They scan <em>all</em> eligible males immediately. Better for achieving specific female marriage rates.</li>
<li>
<strong>Scoring (<code>score3</code>)</strong>: Potential spouses are evaluated based on age difference preferences (<code>preference</code>) or to match a target age-difference distribution (<code>distribution</code>).</li>
</ul></div>
<div class="section level3">
<h3 id="groups--transitions">Groups &amp; Transitions<a class="anchor" aria-label="anchor" href="#groups--transitions"></a></h3>
<ul><li>Individuals belong to a “group” (1..60).</li>
<li>Group membership affects vital rates.</li>
<li>Transitions between groups are modeled as events (<code>transit</code>).</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="id_4-output--analysis">4. Output &amp; Analysis<a class="anchor" aria-label="anchor" href="#id_4-output--analysis"></a></h2>
<div class="section level3">
<h3 id="output-files">Output Files<a class="anchor" aria-label="anchor" href="#output-files"></a></h3>
<ul><li>
<strong><code>result.opop</code></strong>: Final population state (includes dead individuals).</li>
<li>
<strong><code>result.omar</code></strong>: Complete marriage history.</li>
<li>
<strong><code>result.otx</code></strong>: Transition history (if transitions occurred).</li>
</ul></div>
<div class="section level3">
<h3 id="analysis-functions-r">Analysis Functions (R)<a class="anchor" aria-label="anchor" href="#analysis-functions-r"></a></h3>
<ul><li>
<strong><code>read_opop(folder, ...)</code></strong>: Reads <code>.opop</code> into a data frame.
<ul><li>
<em>Columns</em>: <code>pid</code>, <code>fem</code> (sex), <code>group</code>, <code>nev</code> (next event), <code>dob</code>, <code>mom</code>, <code>pop</code>, <code>nesibm</code> (next sib mom), <code>nesibp</code> (next sib dad), <code>lborn</code> (last born), <code>marid</code> (last marriage), <code>mstat</code>, <code>dod</code>, <code>fmult</code>.</li>
</ul></li>
<li>
<strong><code>read_omar(folder, ...)</code></strong>: Reads <code>.omar</code> into a data frame.
<ul><li>
<em>Columns</em>: <code>mid</code>, <code>wpid</code> (wife), <code>hpid</code> (husband), <code>dstart</code>, <code>dend</code>, <code>rend</code> (reason end), <code>wprior</code> (wife’s prior mar), <code>hprior</code> (husband’s prior mar).</li>
</ul></li>
<li>
<strong><code>retrieve_kin(opop, omar, pid, ...)</code></strong>: Reconstructs kinship networks (parents, grandparents, siblings, cousins, etc.) for specified individuals by traversing the linked lists in <code>.opop</code> and <code>.omar</code>.</li>
<li>
<strong><code>estimate_mortality_rates(opop, ...)</code></strong>: Calculates realized age-specific mortality rates from the simulation output for validation.</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="id_5-data-structures-internal--file">5. Data Structures (Internal &amp; File)<a class="anchor" aria-label="anchor" href="#id_5-data-structures-internal--file"></a></h2>
<div class="section level3">
<h3 id="person-struct--opop-columns">Person Struct / .opop Columns<a class="anchor" aria-label="anchor" href="#person-struct--opop-columns"></a></h3>
<ol style="list-style-type: decimal"><li>
<code>pid</code>: Person ID (integer).</li>
<li>
<code>sex</code>: 0=Male, 1=Female.</li>
<li>
<code>group</code>: Group ID.</li>
<li>
<code>next_event</code>: Code for next scheduled event.</li>
<li>
<code>birthdate</code>: Month of birth.</li>
<li>
<code>mother</code>: Mother’s PID.</li>
<li>
<code>father</code>: Father’s PID.</li>
<li>
<code>e_sib_mom</code>: Next eldest sibling (maternal).</li>
<li>
<code>e_sib_dad</code>: Next eldest sibling (paternal).</li>
<li>
<code>lborn</code>: Last born child’s PID.</li>
<li>
<code>last_marriage</code>: ID of most recent marriage.</li>
<li>
<code>mstatus</code>: Marital status (1=Single, 2=Divorced, 3=Widowed, 4=Married).</li>
<li>
<code>deathdate</code>: Month of death (0 if alive).</li>
<li>
<code>fmult</code>: Fertility multiplier (heterogeneity factor).</li>
</ol></div>
<div class="section level3">
<h3 id="marriage-struct--omar-columns">Marriage Struct / .omar Columns<a class="anchor" aria-label="anchor" href="#marriage-struct--omar-columns"></a></h3>
<ol style="list-style-type: decimal"><li>
<code>mid</code>: Marriage ID.</li>
<li>
<code>wpid</code>: Wife’s PID.</li>
<li>
<code>hpid</code>: Husband’s PID.</li>
<li>
<code>dstart</code>: Start month.</li>
<li>
<code>dend</code>: End month (0 if ongoing).</li>
<li>
<code>rend</code>: Reason for end (2=Divorce, 3=Death).</li>
<li>
<code>wprior</code>: Wife’s previous marriage ID.</li>
<li>
<code>hprior</code>: Husband’s previous marriage ID.</li>
</ol></div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tom Theile, Diego Alburez-Gutierrez, Mallika Snyder, Liliana P. Calderón-Bernal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

